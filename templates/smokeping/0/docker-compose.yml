version: '2'
services:
 smokeping:
    image: linuxserver/smokeping
    container_name: smokeping
    environment:
      - TZ=Australia/Brisbane
      - PUID=1001
      - PGID=1001
    volumes:
      - smokeping-config:/config
      - smokeping-data:/data
    ports:
      - 8089:80
    mem_limit: 4096m
    labels:
      io.rancher.container.pull_image: always
      io.rancher.container.dns: 'true'
      io.rancher.scheduler.affinity: "vpn"
      traefik.enable: 'true'
      traefik.port: '8089'
      traefik.domain: 'kellgari.local'
      traefik.frontend.rule: 'Host:smokeping,smokeping.kellgari.local'
volumes:
  smokeping-config:
    driver: rancher-nfs
    driver_opts:
      host: 172.16.4.6
      export: /mnt/media/containers/smokeping-config
      onRemove: retain
  smokeping-data:
    driver: rancher-nfs
    driver_opts:
      host: 172.16.4.6
      export: /mnt/media/containers/smokeping-data
      onRemove: retain


